<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta content="width=device-width,initial-scale=1,minimum-scale=1" name="viewport"><meta content="ie=edge" http-equiv="X-UA-Compatible"><meta content="#fff" name="theme-color" id="theme-color"><meta content="My daily record and my safehouse" name="description"><link href="/" rel="icon"><title>Doris</title><meta content="Doris" property="og:title"><meta content="https://chengziyu.xyz/p/2252a297/index.html" property="og:url"><meta content="/assets/img/haibra4.jpg" property="og:img"><meta content="My daily record and my safehouse" property="og:img"><meta content="article" property="og:type"><meta content="2022-08-28" property="og:article:published_time"><meta content="2022-09-21" property="og:article:modified_time"><meta content="是橙子呀" property="og:article:author"><meta content="BD" property="og:article:tag"><meta content="Linux" property="og:article:tag"><meta content="Doris" property="og:article:tag"><link href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" rel="preload" as="style"><link href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" rel="preload" as="style"><link href="/css/main.css" rel="preload" as="style"><link href="//instant.page/5.1.0" rel="modulepreload"><link href="/css/main.css" rel="stylesheet"><link href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" rel="stylesheet"><link href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" rel="stylesheet"><link href="/js/lib/lightbox/baguetteBox.min.css" rel="stylesheet"><script>function loadScript(e,t){var n=document.createElement("script");n.src=e,t&&(n.onload=t),n.async=!0,document.body.appendChild(n)}function loadCSS(e,t,n){var a=document.createElement("link");a.ref="stylesheet",a.href=e,a.dataset[t]=n,document.head.appendChild(a)}function changeCSS(e,t,n){var t=document.querySelector(t),a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("href",e),a.dataset.prism=n,document.head.replaceChild(a,t)}</script><script>function prismThemeChange(){"dark"===document.getElementById("theme-color").dataset.mode?document.querySelector("[data-prism]")?changeCSS("/js/lib/prism/prism-tomorrow.min.css","[data-prism]","prism-tomorrow"):loadCSS("/js/lib/prism/prism-tomorrow.min.css","prism","prism-tomorrow"):document.querySelector("[data-prism]")?changeCSS("/js/lib/prism/prism-solarizedlight.min.css","[data-prism]","prism-solarizedlight"):loadCSS("/js/lib/prism/prism-solarizedlight.min.css","prism","prism-solarizedlight")}prismThemeChange()</script><script>var reverseDarkList={dark:"light",light:"dark"},themeColor={dark:"#1c1c1e",light:"#fff"},getCssMediaQuery=function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},reverseDarkModeSetting=function(){var e=localStorage.getItem("user-color-scheme");if(reverseDarkList[e])e=reverseDarkList[e];else{if(null!==e)return;e=reverseDarkList[getCssMediaQuery()]}return localStorage.setItem("user-color-scheme",e),e}</script><script>var setDarkmode=function(e){e=e||localStorage.getItem("user-color-scheme");e===getCssMediaQuery()?(document.documentElement.removeAttribute("data-user-color-scheme"),localStorage.removeItem("user-color-scheme"),document.getElementById("theme-color").content=themeColor[e],document.getElementById("theme-color").dataset.mode=e):reverseDarkList[e]?(document.documentElement.setAttribute("data-user-color-scheme",e),document.getElementById("theme-color").content=themeColor[e],document.getElementById("theme-color").dataset.mode=e):(document.documentElement.removeAttribute("data-user-color-scheme"),localStorage.removeItem("user-color-scheme"),document.getElementById("theme-color").content=themeColor[getCssMediaQuery()],document.getElementById("theme-color").dataset.mode=getCssMediaQuery()),prismThemeChange()};setDarkmode()</script><link href="/js/lib/lightbox/baguetteBox.min.js" rel="preload" as="script"><link href="/js/lib/lightbox/baguetteBox.min.css" rel="preload" as="style"><link href="/js/lib/lozad.min.js" rel="preload" as="script"><link href="//cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js" rel="prefetch" as="script"><meta content="Hexo 5.4.2" name="generator"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style></head><body><div class="wrapper"><nav class="navbar"><div class="navbar-logo"><a href="/" class="navbar-logo-main"><span class="navbar-logo-dsc">橙子安全屋</span></a></div><div class="navbar-menu"><a href="/" class="navbar-menu-item">首页 </a><a href="/archives" class="navbar-menu-item">归档 </a><a href="/tags" class="navbar-menu-item">标签 </a><a href="/categories" class="navbar-menu-item">分类 </a><a href="/about" class="navbar-menu-item">关于 </a><a href="/links" class="navbar-menu-item">友链 </a><button aria-label="Toggle dark mode" class="navbar-menu-item navbar-menu-btn darknavbar" id="dark"><i class="iconfont icon-weather"></i></button> <button aria-label="Toggle search" class="navbar-menu-item navbar-menu-btn searchnavbar" id="search"><!-- <i 
        class="iconfont icon-search" 
        style="font-size: 1.2rem; font-weight: 400;">
      </i> --> <svg aria-hidden="true" class="iconify iconify--ion" height="28" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 512 512" width="28" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 80a176 176 0 1 0 176 176A176 176 0 0 0 256 80Z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="28"></path><path d="M232 160a72 72 0 1 0 72 72a72 72 0 0 0-72-72Z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="28"></path><path d="M283.64 283.64L336 336" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="28" stroke-linecap="round"></path></svg></button></div></nav><div id="local-search" style="display:none"><input class="navbar-menu-item" id="search-input" placeholder="请输入搜索内容..."><div id="search-content"></div></div><div class="section-wrap"><div class="container"><div class="columns"><aside class="left-column"><div class="card card-author"><img alt="author avatar" class="author-img" src="/assets/img/haibra4.jpg" height="88" width="88"><p class="author-name">是橙子呀</p><p class="author-description">橙子碎碎念</p><div class="author-message"><a href="/archives" class="author-posts-count"><span>61</span> <span>文章</span> </a><a href="/categories" class="author-categories-count"><span>14</span> <span>分类</span> </a><a href="/tags" class="author-tags-count"><span>35</span> <span>标签</span></a></div></div><div class="sticky-tablet"><article class="display-when-two-columns spacer"><div class="card card-content toc-card"><div class="toc-header"><i class="iconfont icon-menu" style="padding-right:2px"></i>目录</div><ol class="toc"><li class="toc-item toc-level-3"><a href="#%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B" class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">数据模型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a href="#Aggregate-%E6%A8%A1%E5%9E%8B" class="toc-link"><span class="toc-number">1.1.</span> <span class="toc-text">Aggregate 模型</span></a></li><li class="toc-item toc-level-4"><a href="#Unique-%E6%A8%A1%E5%9E%8B" class="toc-link"><span class="toc-number">1.2.</span> <span class="toc-text">Unique 模型</span></a></li><li class="toc-item toc-level-4"><a href="#Duplicate-%E6%A8%A1%E5%9E%8B" class="toc-link"><span class="toc-number">1.3.</span> <span class="toc-text">Duplicate 模型</span></a></li></ol></li><li class="toc-item toc-level-3"><a href="#%E5%AE%98%E6%96%B9%E5%BB%BA%E8%AE%AE" class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">官方建议</span></a></li><li class="toc-item toc-level-3"><a href="#%E6%95%B0%E6%8D%AE%E5%88%92%E5%88%86" class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">数据划分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a href="#%E5%AE%9E%E6%93%8D" class="toc-link"><span class="toc-number">3.1.</span> <span class="toc-text">实操</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a href="#%E5%88%86%E5%8C%BA%E5%92%8C%E5%88%86%E6%A1%B6" class="toc-link"><span class="toc-number">3.1.1.</span> <span class="toc-text">分区和分桶</span></a></li><li class="toc-item toc-level-5"><a href="#%E5%A4%8D%E5%90%88%E5%88%86%E5%8C%BA%E4%B8%8E%E5%8D%95%E5%88%86%E5%8C%BA" class="toc-link"><span class="toc-number">3.1.2.</span> <span class="toc-text">复合分区与单分区</span></a></li><li class="toc-item toc-level-5"><a href="#%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5" class="toc-link"><span class="toc-number">3.1.3.</span> <span class="toc-text">数据导入</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a href="#%E5%8E%9F%E5%AD%90%E6%80%A7%E8%AF%B4%E6%98%8E" class="toc-link"><span class="toc-number">3.1.3.1.</span> <span class="toc-text">原子性说明</span></a></li></ol></li><li class="toc-item toc-level-5"><a href="#attention" class="toc-link"><span class="toc-number">3.1.4.</span> <span class="toc-text">attention</span></a></li></ol></li><li class="toc-item toc-level-4"><a href="#reference" class="toc-link"><span class="toc-number">3.2.</span> <span class="toc-text">reference</span></a></li></ol></li></ol></div></article><article class="card card-content categories-widget"><div class="categories-card"><div class="categories-header"><i class="iconfont icon-fenlei" style="padding-right:2px"></i>分类</div><div class="categories-list"><a href="/categories/Daily-Record/"><div class="categories-list-item">Daily-Record <span class="categories-list-item-badge">25</span></div></a><a href="/categories/Code/"><div class="categories-list-item">Code <span class="categories-list-item-badge">31</span></div></a><a href="/categories/Daily-Record/Technology/"><div class="categories-list-item">Daily-Record/Technology <span class="categories-list-item-badge">20</span></div></a><a href="/categories/Code/BD/"><div class="categories-list-item">Code/BD <span class="categories-list-item-badge">16</span></div></a><a href="/categories/Code/DB/"><div class="categories-list-item">Code/DB <span class="categories-list-item-badge">4</span></div></a><a href="/categories/Code/DataScience/"><div class="categories-list-item">Code/DataScience <span class="categories-list-item-badge">4</span></div></a><a href="/categories/Code/Algorithm/"><div class="categories-list-item">Code/Algorithm <span class="categories-list-item-badge">3</span></div></a><a href="/categories/Code/shell/"><div class="categories-list-item">Code/shell <span class="categories-list-item-badge">4</span></div></a><a href="/categories/Daily-Record/Notes/"><div class="categories-list-item">Daily-Record/Notes <span class="categories-list-item-badge">3</span></div></a><a href="/categories/Daily-Record/novel/"><div class="categories-list-item">Daily-Record/novel <span class="categories-list-item-badge">2</span></div></a><a href="/categories/Markdown/"><div class="categories-list-item">Markdown <span class="categories-list-item-badge">1</span></div></a><a href="/categories/shell/"><div class="categories-list-item">shell <span class="categories-list-item-badge">1</span></div></a><a href="/categories/Statistic/"><div class="categories-list-item">Statistic <span class="categories-list-item-badge">5</span></div></a><a href="/categories/Statistic/Theory/"><div class="categories-list-item">Statistic/Theory <span class="categories-list-item-badge">5</span></div></a></div></div></article><article class="card card-content tags-widget"><div class="tags-card"><div class="tags-header"><i class="iconfont icon-biaoqian" style="padding-right:2px"></i>热门标签</div><div class="tags-list"><a href="/tags/Linux/" title="Linux"><div class="tags-list-item">Linux</div></a><a href="/tags/BD/" title="BD"><div class="tags-list-item">BD</div></a><a href="/tags/Python/" title="Python"><div class="tags-list-item">Python</div></a><a href="/tags/Statistic/" title="Statistic"><div class="tags-list-item">Statistic</div></a><a href="/tags/R/" title="R"><div class="tags-list-item">R</div></a><a href="/tags/SQL/" title="SQL"><div class="tags-list-item">SQL</div></a><a href="/tags/Algorithm/" title="Algorithm"><div class="tags-list-item">Algorithm</div></a><a href="/tags/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97/" title="数据清洗"><div class="tags-list-item">数据清洗</div></a><a href="/tags/Hive/" title="Hive"><div class="tags-list-item">Hive</div></a><a href="/tags/Docker/" title="Docker"><div class="tags-list-item">Docker</div></a><a href="/tags/DataScience/" title="DataScience"><div class="tags-list-item">DataScience</div></a><a href="/tags/Hexo/" title="Hexo"><div class="tags-list-item">Hexo</div></a><a href="/tags/Gitbook/" title="Gitbook"><div class="tags-list-item">Gitbook</div></a><a href="/tags/Read-Think/" title="Read&Think"><div class="tags-list-item">Read&amp;Think</div></a><a href="/tags/Novel/" title="Novel"><div class="tags-list-item">Novel</div></a><a href="/tags/Theory/" title="Theory"><div class="tags-list-item">Theory</div></a></div></div></article></div></aside><main class="main-column"><article class="card card-content"><header><h1 class="post-title">Doris</h1></header><div class="post-meta post-show-meta"><time datetime="2022-08-28T10:30:09.000Z"><i class="iconfont icon-calendar" style="margin-right:2px"></i> <span>2022-08-28</span> </time><span class="dot"></span> <a href="/categories/Code/" class="post-meta-link">Code </a><a href="/categories/Code/BD/" class="post-meta-link">BD </a><span class="dot"></span> <span>3.9k 字</span></div><div class="post-meta post-show-meta" style="margin-top:-10px"><div style="display:flex;align-items:center"><i class="iconfont icon-biaoqian" style="margin-right:2px;font-size:1.15rem"></i> <a href="/tags/BD/" class="post-meta-link">BD </a><span class="dot"></span> <a href="/tags/Linux/" class="post-meta-link">Linux </a><span class="dot"></span> <a href="/tags/Doris/" class="post-meta-link">Doris</a></div></div><div class="post-content" id="section"><h3 id="数据模型"><a href="#数据模型" class="header-anchor"></a>数据模型</h3><p>Doris 中，数据以表（Table）的形式进行逻辑上的描述。 一张表包括行（Row）和列（Column）。Row 即用户的一行数据。Column 用于描述一行数据中不同的字段。Column 可以分为两大类：Key 和 Value。从业务角度看，Key 和 Value 可以分别对应维度列和指标列</p><p>Doris 的数据模型主要分为3类:</p><ul><li>Aggregate</li><li>Unique</li><li>Duplicate</li></ul><h4 id="Aggregate-模型"><a href="#Aggregate-模型" class="header-anchor"></a>Aggregate 模型</h4><p>Aggregate_Model(聚合模型)在建表时，定义好<code>AggregationType</code>,被定义的数据即为<code>value</code>，未定义的即为<code>key</code>。导入数据时，对于 Key 列相同的行会聚合成一行，而 Value 列会按照设置的 AggregationType 进行聚合（导入数据到保存到Doris中对数据进行处理）。 AggregationType 目前有以下四种聚合方式：</p><ol><li>SUM：求和，多行的 Value 进行累加。</li><li>REPLACE：替代，下一批数据中的 Value 会替换之前导入过的行中的 Value(最后更新的数据记录)</li><li>MAX：保留最大值。</li><li>MIN：保留最小值。</li></ol><pre class="language-SQL" data-language="SQL"><code class="language-SQL">CREATE TABLE IF NOT EXISTS example_db.expamle_tbl
(
    `user_id` LARGEINT NOT NULL COMMENT "用户id",
    `date` DATE NOT NULL COMMENT "数据灌入日期时间",
    `city` VARCHAR(20) COMMENT "用户所在城市",
    `age` SMALLINT COMMENT "用户年龄",
    # REPLACE 
    `sex` TINYINT COMMENT "用户性别",
    `last_visit_date` DATETIME REPLACE DEFAULT "1970-01-01 00:00:00" COMMENT "用户最后一次访问时间",
    # SUM
    `cost` BIGINT SUM DEFAULT "0" COMMENT "用户总消费",
    # MAX
    `max_dwell_time` INT MAX DEFAULT "0" COMMENT "用户最大停留时间",
    # MIN
    `min_dwell_time` INT MIN DEFAULT "99999" COMMENT "用户最小停留时间"
)
# 定义AGGREGATE KEY
AGGREGATE KEY(`user_id`, `date`, `city`, `age`, `sex`)
DISTRIBUTED BY HASH(`user_id`) BUCKETS 1
PROPERTIES (
"replication_allocation" = "tag.location.default: 1"
);</code></pre><blockquote><p>经过聚合，Doris 中最终只会存储聚合后的数据。<br>明细数据会丢失，用户不能够再查询到聚合前的明细数据了。<br>但只要保证导入的数据中，每一行的 Key 都不完全相同(加入时间戳列)，那么即使在聚合模型下，Doris 也可以保存完整的明细数据。</p></blockquote><h4 id="Unique-模型"><a href="#Unique-模型" class="header-anchor"></a>Unique 模型</h4><p>获得主键的唯一性约束，实际上也是聚合模型的一个特例(只有一个<code>key</code>)</p><table><thead><tr><th>ColumnName</th><th>Type</th><th>IsKey</th><th>Comment</th></tr></thead><tbody><tr><td>user_id</td><td>BIGINT</td><td>Yes</td><td>用户id</td></tr><tr><td>username</td><td>VARCHAR(50)</td><td>Yes</td><td>用户昵称</td></tr><tr><td>city</td><td>VARCHAR(20)</td><td>No</td><td>用户所在城市</td></tr><tr><td>age</td><td>SMALLINT</td><td>No</td><td>用户年龄</td></tr><tr><td>sex</td><td>TINYINT</td><td>No</td><td>用户性别</td></tr><tr><td>phone</td><td>LARGEINT</td><td>No</td><td>用户电话</td></tr><tr><td>address</td><td>VARCHAR(500)</td><td>No</td><td>用户住址</td></tr><tr><td>register_time</td><td>DATETIME</td><td>No</td><td>用户注册时间</td></tr><tr><td>Unique 模型完全可以用聚合模型中的 REPLACE 方式替代。其内部的实现方式和数据存储方式也完全一样</td><td></td><td></td><td></td></tr></tbody></table><pre class="language-sql" data-language="sql"><code class="language-sql">CREATE TABLE IF NOT EXISTS example_db.expamle_tbl
(
    `user_id` LARGEINT NOT NULL COMMENT "用户id",
    `username` VARCHAR(50) NOT NULL COMMENT "用户昵称",
    `city` VARCHAR(20) COMMENT "用户所在城市",
    `age` SMALLINT COMMENT "用户年龄",
    `sex` TINYINT COMMENT "用户性别",
    `phone` LARGEINT COMMENT "用户电话",
    `address` VARCHAR(500) COMMENT "用户地址",
    `register_time` DATETIME COMMENT "用户注册时间"
)
UNIQUE KEY(`user_id`, `username`)
DISTRIBUTED BY HASH(`user_id`) BUCKETS 1
PROPERTIES (
"replication_allocation" = "tag.location.default: 1"
);</code></pre><h4 id="Duplicate-模型"><a href="#Duplicate-模型" class="header-anchor"></a>Duplicate 模型</h4><p>数据完全按照导入文件中的数据进行存储，不会有任何聚合。即使两行数据完全相同，也都会保留。 而在建表语句中指定的 DUPLICATE KEY，只是用来指明底层数据按照那些列进行排序。</p><blockquote><p>在 DUPLICATE KEY 的选择上，官方建议适当的选择前 2-4 列</p></blockquote><h3 id="官方建议"><a href="#官方建议" class="header-anchor"></a>官方建议</h3><div class="post-note note-danger"><p>数据模型在建表时就已经确定，且无法修改。模型选择需谨慎</p></div><ul><li>Aggregate 模型可以通过预聚合，极大地降低聚合查询时所需扫描的数据量和查询的计算量，非常适合有固定模式的报表类查询场景。但是该模型对 count(*) 查询很不友好。同时因为固定了 Value 列上的聚合方式，在进行其他类型的聚合查询时，需要考虑语意正确性。</li><li>Unique 模型针对需要唯一主键约束的场景，可以保证主键唯一性约束。但是无法利用 ROLLUP 等预聚合带来的查询优势（因为本质是 REPLACE，没有 SUM 这种聚合方式）。<ul><li>【注意】Unique 模型仅支持整行更新</li><li>如果用户既需要唯一主键约束，又需要更新部分列（例如将多张源表导入到一张 doris 表的情形），则可以考虑使用 Aggregate 模型，同时将非主键列的聚合类型设置为 REPLACE_IF_NOT_NULL</li></ul></li><li>Duplicate 适合任意维度的 Ad-hoc 查询。虽然同样无法利用预聚合的特性，但是不受聚合模型的约束，可以发挥列存模型的优势（只读取相关列，而不需要读取所有 Key 列）</li></ul><h3 id="数据划分"><a href="#数据划分" class="header-anchor"></a>数据划分</h3><p>在 Doris 中，数据都以表（Table）的形式进行逻辑上的描述。一张表包括行（Row）和列（Column）：</p><ul><li>Row：即用户的一行数据；</li><li>Column： 用于描述一行数据中不同的字段。<ul><li>Column 可以分为两大类：Key 和 Value。</li><li>从业务角度看，Key 和 Value 可以分别对应维度列和指标列。</li><li>从聚合模型的角度来说，Key 列相同的行，会聚合成一行。其中 Value 列的聚合方式由用户在建表时指定</li></ul></li></ul><p>Tablet &amp; Partition<br>在 Doris 的存储引擎中，用户数据被水平划分为若干个数据分片（Tablet，数据分桶）。每个 Tablet 包含若干数据行。各个 Tablet 之间的数据没有交集，并且在物理上是独立存储的。</p><p>多个 Tablet 在逻辑上归属于不同的分区（Partition）。一个 Tablet 只属于一个 Partition。而一个 Partition 包含若干个 Tablet。因为 Tablet 在物理上是独立存储的，所以可以视为 Partition 在物理上也是独立。**Tablet 是数据移动、复制等操作的最小物理存储单元。**若干个 Partition 组成一个 Table。Partition 可以视为是逻辑上最小的管理单元。数据的导入与删除，都可以或仅能针对一个 Partition 进行。<br><img alt="" class="lozad post-image" src="https://cdn.jsdelivr.net/gh/MuMu-HuaHua/picgo/Table.png" data-src="https://cdn.jsdelivr.net/gh/MuMu-HuaHua/picgo/Table.png" srcset="https://cdn.jsdelivr.net/gh/MuMu-HuaHua/picgo/202207221201495.gif"></p><h4 id="实操"><a href="#实操" class="header-anchor"></a>实操</h4><p>Doris 的建表是一个同步命令，SQL执行完成即返回结果，命令返回成功即表示建表成功。<br>列定义建议：</p><ol><li><strong>Key 列必须在所有 Value 列之前</strong>。</li><li>尽量选择 <strong>整型类型</strong>。因为整型类型的计算和查找效率远高于字符串。</li><li>对于不同长度的整型类型的选择原则，遵循 <strong>够用即可</strong>。</li><li>对于 VARCHAR 和 STRING 类型的长度，遵循 <strong>够用即可</strong>。</li><li>所有列的总字节长度（包括 Key 和 Value）不能超过 100KB。</li></ol><pre class="language-SQL" data-language="SQL"><code class="language-SQL">-- Range Partition
-- `IF NOT EXISTS` 表示如果没有创建过该表，则创建。注意这里只判断表名是否存在，而不会判断新建表结构是否与已存在的表结构相同。
-- 所以如果存在一个同名但不同构的表，该命令也会返回成功，但并不代表已经创建了新的表和新的结构。
CREATE TABLE IF NOT EXISTS example_db.expamle_range_tbl
(
    `user_id` LARGEINT NOT NULL COMMENT "用户id",
    `date` DATE NOT NULL COMMENT "数据灌入日期时间",
    `timestamp` DATETIME NOT NULL COMMENT "数据灌入的时间戳",
    `city` VARCHAR(20) COMMENT "用户所在城市",
    `age` SMALLINT COMMENT "用户年龄",
    `sex` TINYINT COMMENT "用户性别",
    `last_visit_date` DATETIME REPLACE DEFAULT "1970-01-01 00:00:00" COMMENT "用户最后一次访问时间",
    `cost` BIGINT SUM DEFAULT "0" COMMENT "用户总消费",
    `max_dwell_time` INT MAX DEFAULT "0" COMMENT "用户最大停留时间",
    `min_dwell_time` INT MIN DEFAULT "99999" COMMENT "用户最小停留时间"
)
ENGINE=OLAP
AGGREGATE KEY(`user_id`, `date`, `timestamp`, `city`, `age`, `sex`)
PARTITION BY RANGE(`date`)
(
    PARTITION `p201701` VALUES LESS THAN ("2017-02-01"),
    PARTITION `p201702` VALUES LESS THAN ("2017-03-01"),
    PARTITION `p201703` VALUES LESS THAN ("2017-04-01")
)
DISTRIBUTED BY HASH(`user_id`) BUCKETS 16
PROPERTIES
(
    "replication_num" = "3",
    "storage_medium" = "SSD",
    "storage_cooldown_time" = "2018-01-01 12:00:00"
);

-- List Partition
CREATE TABLE IF NOT EXISTS example_db.expamle_list_tbl
(
    `user_id` LARGEINT NOT NULL COMMENT "用户id",
    `date` DATE NOT NULL COMMENT "数据灌入日期时间",
    `timestamp` DATETIME NOT NULL COMMENT "数据灌入的时间戳",
    `city` VARCHAR(20) COMMENT "用户所在城市",
    `age` SMALLINT COMMENT "用户年龄",
    `sex` TINYINT COMMENT "用户性别",
    `last_visit_date` DATETIME REPLACE DEFAULT "1970-01-01 00:00:00" COMMENT "用户最后一次访问时间",
    `cost` BIGINT SUM DEFAULT "0" COMMENT "用户总消费",
    `max_dwell_time` INT MAX DEFAULT "0" COMMENT "用户最大停留时间",
    `min_dwell_time` INT MIN DEFAULT "99999" COMMENT "用户最小停留时间"
)
ENGINE=olap
AGGREGATE KEY(`user_id`, `date`, `timestamp`, `city`, `age`, `sex`)
PARTITION BY LIST(`city`)
(
    PARTITION `p_cn` VALUES IN ("Beijing", "Shanghai", "Hong Kong"),
    PARTITION `p_usa` VALUES IN ("New York", "San Francisco"),
    PARTITION `p_jp` VALUES IN ("Tokyo")
)
DISTRIBUTED BY HASH(`user_id`) BUCKETS 16
PROPERTIES
(
    "replication_num" = "3",
    "storage_medium" = "SSD",
    "storage_cooldown_time" = "2018-01-01 12:00:00"
);</code></pre><h5 id="分区和分桶"><a href="#分区和分桶" class="header-anchor"></a>分区和分桶</h5><p>Doris 支持两层的数据划分</p><ul><li>第一层是 Partition，支持 Range 和 List 的划分方式</li><li>第二层是 Bucket（Tablet），仅支持 Hash 的划分方式。</li><li>也可以仅使用一层分区。使用一层分区时，只支持 Bucket 划分</li></ul><ol><li>Partition<br>Partition 列可以指定一列或多列，分区列必须为 KEY 列<br><strong>不论分区列是什么类型，在写分区值时，都需要加双引号。</strong><br>分区数量理论上没有上限。<br>当不使用 Partition 建表时，系统会自动生成一个和表名同名的，全值范围的 Partition。该 Partition 对用户不可见，并且不可删改。<br>创建分区时不可添加范围重叠的分区。<ol><li>Range 分区<ul><li>分区列通常为时间列，以方便的管理新旧数据</li><li>Partition 支持通过 VALUES LESS THAN (…) 仅指定上界，系统会将前一个分区的上界作为该分区的下界，生成一个左闭右开的区间。同时，也支持通过 VALUES […) 指定上下界，生成一个左闭右开的区间。通过 VALUES […) 同时指定上下界比较容易理解。</li></ul></li><li>List 分区<ul><li>分区列支持 BOOLEAN, TINYINT, SMALLINT, INT, BIGINT, LARGEINT, DATE, DATETIME, CHAR, VARCHAR 数据类型，分区值为枚举值。只有当数据为目标分区枚举值其中之一时，才可以命中分区。</li><li>Partition 支持通过 VALUES IN (…) 来指定每个分区包含的枚举值。</li></ul></li></ol></li><li>Bucket</li></ol><ul><li>如果使用了 Partition，则 DISTRIBUTED … 语句描述的是数据在各个分区内的划分规则。</li><li>如果不使用 Partition，则描述的是对整个表的数据的划分规则。</li><li></li></ul><p>分桶列可以是多列，但必须为 Key 列。分桶列可以和 Partition 列相同或不同。分桶列的选择，是在 <strong>查询吞吐</strong> 和 <strong>查询并发</strong> 之间的一种权衡：</p><ul><li>如果选择多个分桶列，则数据分布更均匀。如果一个查询条件不包含所有分桶列的等值条件，那么该查询会触发所有分桶同时扫描，这样查询的吞吐会增加，单个查询的延迟随之降低。这个方式适合大吞吐低并发的查询场景。</li><li>如果仅选择一个或少数分桶列，则对应的点查询可以仅触发一个分桶扫描。此时，当多个点查询并发时，这些查询有较大的概率分别触发不同的分桶扫描，各个查询之间的IO影响较小（尤其当不同桶分布在不同磁盘上时），所以这种方式适合高并发的点查询场景。</li><li>分桶的数量理论上没有上限。</li></ul><h5 id="复合分区与单分区"><a href="#复合分区与单分区" class="header-anchor"></a>复合分区与单分区</h5><p>复合分区</p><ul><li>第一级称为 Partition，即分区。用户可以指定某一维度列作为分区列（当前只支持整型和时间类型的列），并指定每个分区的取值范围。</li><li>第二级称为 Distribution，即分桶。用户可以指定一个或多个维度列以及桶数对数据进行 HASH 分布。</li></ul><p>以下场景推荐使用 <strong>复合分区</strong></p><ul><li>有 <strong>时间维度</strong> 或 <strong>类似带有有序值的维度</strong>，可以以这类维度列作为分区列。分区粒度可以根据导入频次、分区数据量等进行评估。</li><li>历史数据删除需求：如有删除历史数据的需求（比如仅保留最近N 天的数据）。使用复合分区，可以通过删除历史分区来达到目的。也可以通过在指定分区内发送 DELETE 语句进行数据删除。</li><li>解决数据倾斜问题：每个分区可以单独指定分桶数量。如按天分区，当每天的数据量差异很大时，可以通过指定分区的分桶数，合理划分不同分区的数据,分桶列建议选择区分度大的列。</li><li>用户也可以不使用复合分区，即使用单分区。则数据只做 HASH 分布。</li></ul><h5 id="数据导入"><a href="#数据导入" class="header-anchor"></a>数据导入</h5><ul><li>创建数据库（指定数据库）</li><li>建表（单分区、复合分区）<ul><li>单分区</li><li><pre><code class="language-sql">CREATE TABLE table1
(
    siteid INT DEFAULT '10',
    citycode SMALLINT,
    username VARCHAR(32) DEFAULT '',
    pv BIGINT SUM DEFAULT '0'
)
AGGREGATE KEY(siteid, citycode, username)
DISTRIBUTED BY HASH(siteid) BUCKETS 10
PROPERTIES("replication_num" = "1");

DESC table1;
<pre class="language-none"><code class="language-none">- 复合分区
-  ``` sql
     CREATE TABLE table2
       (
           event_day DATE,
           siteid INT DEFAULT '10',
           citycode SMALLINT,
           username VARCHAR(32) DEFAULT '',
           pv BIGINT SUM DEFAULT '0'
       )
       AGGREGATE KEY(event_day, siteid, citycode, username)
       PARTITION BY RANGE(event_day)
       (
           PARTITION p201706 VALUES LESS THAN ('2017-07-01'),
           PARTITION p201707 VALUES LESS THAN ('2017-08-01'),
           PARTITION p201708 VALUES LESS THAN ('2017-09-01')
       )
       DISTRIBUTED BY HASH(siteid) BUCKETS 10
       PROPERTIES("replication_num" = "1");
    
    DESC table2;</code></pre>
</code></pre></li></ul></li><li>导入数据<ul><li>流式导入<ul><li>流式导入通过 HTTP 协议向 Doris 传输数据，可以不依赖其他系统或组件直接导入本地数据</li><li></li></ul></li><li>Broker<ul><li>Broker 导入通过部署的 Broker 进程，读取外部存储上的数据进行导入</li><li></li></ul></li></ul></li></ul><p>支持的数据格式<br>不同的导入方式支持的数据格式略有不同。</p><p>按场景划分</p><table><thead><tr><th>数据源</th><th>导入方式</th></tr></thead><tbody><tr><td>对象存储（s3）,HDFS</td><td>使用Broker导入数据</td></tr><tr><td>本地文件</td><td>导入本地数据</td></tr><tr><td>Kafka</td><td>订阅Kafka数据</td></tr><tr><td>Mysql、PostgreSQL，Oracle，SQLServer</td><td>通过外部表同步数据</td></tr><tr><td>通过JDBC导入</td><td>使用JDBC同步数据</td></tr><tr><td>导入JSON格式数据</td><td>JSON格式数据导入</td></tr><tr><td>MySQL Binlog</td><td>Binlog Load</td></tr></tbody></table><p>按导入方式划分</p><table><thead><tr><th>导入方式名称</th><th>使用方式</th></tr></thead><tbody><tr><td>Spark Load</td><td>通过Spark导入外部数据</td></tr><tr><td>Broker Load</td><td>通过Broker导入外部存储数据</td></tr><tr><td>Stream Load</td><td>流式导入数据(本地文件及内存数据)</td></tr><tr><td>Routine Load</td><td>导入Kafka数据</td></tr><tr><td>Binlog Load</td><td>采集Mysql Binlog 导入数据</td></tr><tr><td>Insert Into</td><td>外部表通过INSERT方式导入数据</td></tr><tr><td>S3 Load</td><td>S3协议的对象存储数据导入</td></tr><tr><td>导入方式</td><td>支持的格式</td></tr><tr><td>–</td><td>–</td></tr><tr><td>Broker Load</td><td>Parquet，ORC，csv，gzip</td></tr><tr><td>Stream Load</td><td>csv, gzip, json</td></tr><tr><td>Routine Load</td><td>csv, json</td></tr></tbody></table><h6 id="原子性说明"><a href="#原子性说明" class="header-anchor"></a>原子性说明</h6><p>Doris 的每一个导入作业，不论是使用 Broker Load 进行批量导入，还是使用 INSERT 语句进行单条导入，都是一个完整的事务操作。导入事务可以保证一批次内的数据原子生效，不会出现部分数据写入的情况。</p><p>同时，一个导入作业都会有一个 Label。这个 Label 是在一个数据库（Database）下唯一的，用于唯一标识一个导入作业。Label 可以由用户指定，部分导入功能也会由系统自动生成。</p><p>Label 是用于保证对应的导入作业，仅能成功导入一次。一个被成功导入的 Label，再次使用时，会被拒绝并报错 Label already used。</p><h5 id="attention"><a href="#attention" class="header-anchor"></a>attention</h5><ul><li><code>HELP CREATE TABLE;</code> 检查相关语法结构。</li><li>ENGINE 的类型是 olap，即默认的 ENGINE 类型。<ul><li>在 Doris 中，只有这个 ENGINE 类型是由 Doris 负责数据管理和存储的。</li><li>其他 ENGINE 类型，如 mysql、broker、es 等等，本质上只是对外部其他数据库或系统中的表的映射，以保证 Doris 可以读取这些数据。</li><li>Doris 本身并不创建、管理和存储任何非 olap ENGINE 类型的表和数据</li></ul></li><li>表的数据量可以通过<code>SHOW DATA</code>命令查看，结果除以副本数，即表的数据量</li><li>同步及异步导入<ul><li>导入方式分为同步和异步。</li><li>对于同步导入方式，返回结果即表示导入成功还是失败</li><li>对于异步导入方式，返回成功仅代表作业提交成功，不代表数据导入成功，需要使用对应的命令查看导入作业的运行状态。</li></ul></li></ul><h4 id="reference"><a href="#reference" class="header-anchor"></a>reference</h4><p><a href="https://doris.apache.org/zh-CN/docs/data-table/data-model" rel="noopener" target="_blank">官方文档</a></p></div><div><div class="post-note copyright note-warning" style="margin-top:42px"><p><span style="font-weight:700">作者：</span><a href="/about" rel="nofollow noopener noreferrer" target="_blank"> 是橙子呀</a></p><p><span style="font-weight:700">文章链接：</span><a href="https://chengziyu.xyz/p/2252a297/" rel="nofollow noopener noreferrer" target="_blank"> https://chengziyu.xyz/p/2252a297/</a></p><p><span style="font-weight:700">版权声明：</span>本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank">CC BY-NC-SA 4.0 协议</a>。转载请注明出处！</p></div></div></article><div class="nav"><div class="nav-item-prev"><a href="/p/2252a297/" class="nav-link"><i class="iconfont icon-left nav-prev-icon"></i><div><div class="nav-label">上一篇</div><div class="nav-title">Doris</div></div></a></div><div class="nav-item-next"><a href="/p/ca9f0885/" class="nav-link"><div><div class="nav-label">下一篇</div><div class="nav-title">重装记录</div></div><i class="iconfont icon-right nav-next-icon"></i></a></div></div><div class="card card-content toc-card" id="mobiletoc"><div class="toc-header"><i class="iconfont icon-menu" style="padding-right:2px"></i>目录</div><ol class="toc"><li class="toc-item toc-level-3"><a href="#%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B" class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">数据模型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a href="#Aggregate-%E6%A8%A1%E5%9E%8B" class="toc-link"><span class="toc-number">1.1.</span> <span class="toc-text">Aggregate 模型</span></a></li><li class="toc-item toc-level-4"><a href="#Unique-%E6%A8%A1%E5%9E%8B" class="toc-link"><span class="toc-number">1.2.</span> <span class="toc-text">Unique 模型</span></a></li><li class="toc-item toc-level-4"><a href="#Duplicate-%E6%A8%A1%E5%9E%8B" class="toc-link"><span class="toc-number">1.3.</span> <span class="toc-text">Duplicate 模型</span></a></li></ol></li><li class="toc-item toc-level-3"><a href="#%E5%AE%98%E6%96%B9%E5%BB%BA%E8%AE%AE" class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">官方建议</span></a></li><li class="toc-item toc-level-3"><a href="#%E6%95%B0%E6%8D%AE%E5%88%92%E5%88%86" class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">数据划分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a href="#%E5%AE%9E%E6%93%8D" class="toc-link"><span class="toc-number">3.1.</span> <span class="toc-text">实操</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a href="#%E5%88%86%E5%8C%BA%E5%92%8C%E5%88%86%E6%A1%B6" class="toc-link"><span class="toc-number">3.1.1.</span> <span class="toc-text">分区和分桶</span></a></li><li class="toc-item toc-level-5"><a href="#%E5%A4%8D%E5%90%88%E5%88%86%E5%8C%BA%E4%B8%8E%E5%8D%95%E5%88%86%E5%8C%BA" class="toc-link"><span class="toc-number">3.1.2.</span> <span class="toc-text">复合分区与单分区</span></a></li><li class="toc-item toc-level-5"><a href="#%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5" class="toc-link"><span class="toc-number">3.1.3.</span> <span class="toc-text">数据导入</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a href="#%E5%8E%9F%E5%AD%90%E6%80%A7%E8%AF%B4%E6%98%8E" class="toc-link"><span class="toc-number">3.1.3.1.</span> <span class="toc-text">原子性说明</span></a></li></ol></li><li class="toc-item toc-level-5"><a href="#attention" class="toc-link"><span class="toc-number">3.1.4.</span> <span class="toc-text">attention</span></a></li></ol></li><li class="toc-item toc-level-4"><a href="#reference" class="toc-link"><span class="toc-number">3.2.</span> <span class="toc-text">reference</span></a></li></ol></li></ol></div></main><aside class="right-column"><div class="sticky-widescreen"><article class="card card-content toc-card"><div class="toc-header"><i class="iconfont icon-menu" style="padding-right:2px"></i>目录</div><ol class="toc"><li class="toc-item toc-level-3"><a href="#%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B" class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">数据模型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a href="#Aggregate-%E6%A8%A1%E5%9E%8B" class="toc-link"><span class="toc-number">1.1.</span> <span class="toc-text">Aggregate 模型</span></a></li><li class="toc-item toc-level-4"><a href="#Unique-%E6%A8%A1%E5%9E%8B" class="toc-link"><span class="toc-number">1.2.</span> <span class="toc-text">Unique 模型</span></a></li><li class="toc-item toc-level-4"><a href="#Duplicate-%E6%A8%A1%E5%9E%8B" class="toc-link"><span class="toc-number">1.3.</span> <span class="toc-text">Duplicate 模型</span></a></li></ol></li><li class="toc-item toc-level-3"><a href="#%E5%AE%98%E6%96%B9%E5%BB%BA%E8%AE%AE" class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">官方建议</span></a></li><li class="toc-item toc-level-3"><a href="#%E6%95%B0%E6%8D%AE%E5%88%92%E5%88%86" class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">数据划分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a href="#%E5%AE%9E%E6%93%8D" class="toc-link"><span class="toc-number">3.1.</span> <span class="toc-text">实操</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a href="#%E5%88%86%E5%8C%BA%E5%92%8C%E5%88%86%E6%A1%B6" class="toc-link"><span class="toc-number">3.1.1.</span> <span class="toc-text">分区和分桶</span></a></li><li class="toc-item toc-level-5"><a href="#%E5%A4%8D%E5%90%88%E5%88%86%E5%8C%BA%E4%B8%8E%E5%8D%95%E5%88%86%E5%8C%BA" class="toc-link"><span class="toc-number">3.1.2.</span> <span class="toc-text">复合分区与单分区</span></a></li><li class="toc-item toc-level-5"><a href="#%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5" class="toc-link"><span class="toc-number">3.1.3.</span> <span class="toc-text">数据导入</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a href="#%E5%8E%9F%E5%AD%90%E6%80%A7%E8%AF%B4%E6%98%8E" class="toc-link"><span class="toc-number">3.1.3.1.</span> <span class="toc-text">原子性说明</span></a></li></ol></li><li class="toc-item toc-level-5"><a href="#attention" class="toc-link"><span class="toc-number">3.1.4.</span> <span class="toc-text">attention</span></a></li></ol></li><li class="toc-item toc-level-4"><a href="#reference" class="toc-link"><span class="toc-number">3.2.</span> <span class="toc-text">reference</span></a></li></ol></li></ol></article><article class="card card-content"><div class="recent-posts-card"><div class="recent-posts-header"><i class="iconfont icon-wenzhang_huaban" style="padding-right:2px"></i>最近文章</div><div class="recent-posts-list"><div class="recent-posts-item"><div class="recent-posts-item-title">2022-09-24</div><a href="/p/7ffce599/"><div class="recent-posts-item-content">java记录</div></a></div><div class="recent-posts-item"><div class="recent-posts-item-title">2022-09-06</div><a href="/p/e81d6acd/"><div class="recent-posts-item-content">TableauOfAzurelane</div></a></div><div class="recent-posts-item"><div class="recent-posts-item-title">2022-09-02</div><a href="/p/77d31549/"><div class="recent-posts-item-content">vpf记录</div></a></div><div class="recent-posts-item"><div class="recent-posts-item-title">2022-08-31</div><a href="/p/9cf74209/"><div class="recent-posts-item-content">gcc安装</div></a></div></div></div></article></div></aside></div></div></div></div><footer class="footer"><div class="footer-container"><div><div class="footer-dsc"><span>Copyright © 2022 </span>&nbsp; <a href="/" class="footer-link">橙子安全屋</a></div></div><div class="BbeiAn-info"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备2022028508号-1</a></div><div class="BbeiAn-info"><span style="padding-left:25px;background:url(/img/beian.png) no-repeat left center"></span> <a href="https://beian.miit.gov.cn" rel="noopener" target="_blank">粤ICP备2022028508号-1</a><br></div><div class="footer-dsc">本站总访问量<span id="busuanzi_value_site_pv"></span>次 <span>&nbsp;|&nbsp;</span> 本站总访客数<span id="busuanzi_value_site_uv"></span>次</div></div></footer><a class="basebutton" aria-label="回到顶部" id="scrollbutton" role="button"><i class="iconfont button-icon icon-arrowleft"></i> </a><a class="basebutton" aria-label="menu button" id="menubutton" role="button"><i class="iconfont button-icon icon-menu"></i> </a><a class="basebutton" aria-label="控制中心" id="popbutton" role="button"><i class="iconfont button-icon icon-expand"></i> </a><a class="basebutton darkwidget" aria-label="夜色模式" id="darkbutton" role="button"><i class="iconfont button-icon icon-weather"></i> </a><a class="basebutton searchwidget" aria-label="搜索" id="searchbutton" role="button"><i class="iconfont button-icon icon-search"></i></a><script>var addImgLayout=function(){for(var t=document.querySelectorAll(".post-content img"),e=0;e<t.length;e++){var a=document.createElement("a"),l=(a.setAttribute("href",t[e].getAttribute("data-src")),a.setAttribute("aria-label","illustration"),a.style.cssText="width: 100%; display: flex; justify-content: center;",t[e].alt&&(a.dataset.caption=t[e].alt),a.dataset.nolink=!0,t[e].before(a),a.append(t[e]),document.createElement("div"));l.classList.add("gallery"),a.before(l),l.append(a)}baguetteBox.run(".gallery")}</script><script>loadScript("/js/lib/lightbox/baguetteBox.min.js",addImgLayout)</script><script src="/js/main.js"></script><script>loadScript("/js/lib/busuanzi.min.js")</script><script>var addLazyload=function(){lozad(".lozad",{load:function(a){a.srcset=a.getAttribute("data-src")},loaded:function(a){a.classList.add("loaded")}}).observe()}</script><script>loadScript("/js/lib/lozad.min.js",addLazyload)</script><script src="//instant.page/5.1.0" integrity="sha384-by67kQnR+pyfy8yWP4kPO12fHKRLHZPfEsiSXR8u2IKcTdxD805MGUXBzVPnkLHw" type="module"></script><script>setTimeout(()=>{localSearch("search.json")},0)</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({model:{jsonPath:"/live2dw/assets/assets/remu.model.json"},display:{superSample:3,width:200,height:400,position:"right",hOffset:60,vOffset:-30},mobile:{show:!0,scale:.5},react:{opacity:.8},log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/",tagMode:!1})</script></body></html>